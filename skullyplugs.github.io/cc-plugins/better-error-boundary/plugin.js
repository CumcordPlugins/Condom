(function(o,r,e,d){"use strict";const u=r.findByDisplayName("ArrowDropDown"),y=r.findByDisplayName("ArrowDropUp");class h extends e.React.Component{constructor(t){super(t);this.state={open:!1}}render(){const{content:t,openTxt:l,closedTxt:n}=this.props;return e.React.createElement(e.React.Fragment,null,e.React.createElement("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>this.setState({open:!this.state.open})},this.state.open?e.React.createElement(y,null):e.React.createElement(u,null),e.React.createElement("p",null,this.state.open?n:l)),e.React.createElement("div",{style:{display:this.state.open?"block":"none",textAlign:"left",marginLeft:"2%"}},t))}}const{defaultRules:{codeBlock:{react:f}}}=r.findByProps("parse","parseTopic"),R=r.findByDisplayName("Card");var E=({error:a})=>e.React.createElement(e.React.Fragment,null,e.React.createElement("p",null,"Discord has crashed."),e.React.createElement("p",null,"Short Message: ",e.React.createElement("code",null,a.message)),e.React.createElement(R,{style:{padding:"10px"}},e.React.createElement(h,{content:f({content:a.stack,lang:"js"},null,{}),openTxt:"Click to reveal full error",closedTxt:"Click to hide full error"})));let c,i;var B=a=>({onLoad(){let t,l=!1;const n=r.findByDisplayName("ErrorBoundary",!1),{sizeLarge:g,colorBrand:D}=r.findByProps("sizeLarge"),x=r.findByProps("DropdownSizes");i=o.before("componentDidCatch",n.default.prototype,p=>t=p[0]),c=o.after("render",n.default.prototype,(p,s)=>{!s.props.note||(s.props.title="oh noes :o",s.props.note.props.children=[e.React.createElement(E,{error:t})],t&&!l&&(l=!0,s.props.action.props.children.push(e.React.createElement(x,{children:"Copy stack to clipboard",size:g,color:D,style:{marginLeft:"10px"},onClick:()=>{DiscordNative.clipboard.copy("```js\n"+t.stack+"```"),d.showToast({title:"Better Error Boundary",content:"The stack has been copied to your clipboard.",duration:5e3})}}))))})},onUnload(){c?.(),i?.()}});return B})(cumcord.patcher,cumcord.modules.webpack,cumcord.modules.common,cumcord.ui.toasts);
