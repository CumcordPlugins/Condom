(function(t,p,l,a){"use strict";const y=t.findByProps("useStateFromStores"),d=t.findByProps("UserSettingsSections"),f=t.findByPropsAll("Messages")[1].Messages,S=t.findByDisplayName("Tooltip"),u=t.findByProps("getAllApplicationActivities"),h=t.findByDisplayName("Monitor"),g=t.findByDisplayName("MobileDevice"),T=t.findByDisplayName("Globe"),U={desktop:h,mobile:g,web:T},D={online:d.Colors.STATUS_GREEN_600,idle:d.Colors.STATUS_YELLOW_500,dnd:d.Colors.STATUS_RED_500},I={online:f.STATUS_ONLINE,idle:f.STATUS_IDLE,dnd:f.STATUS_DND};function m({user:n}){const e=y.useStateFromStores([u],()=>u.getState()?.clientStatuses?.[n.id]||{},[n]),o=[];for(const s of Object.keys(e)){const r=e[s];o.push(a.React.createElement(S,{text:`${I[r]} on ${s}`},i=>a.React.createElement(U[s],Object.assign({},i,{color:D[r],width:16,height:16,style:{margin:"1px"}}))))}return!n.bot&&a.React.createElement("div",{className:"platform-icons-wrapper",style:{marginLeft:"4px"}},o)}const N=t.findByDisplayName("MemberListItem"),A=t.find(n=>n&&n.default&&n.default.render&&typeof n.default.render=="function"&&n.default.render.toString().match(/{className:.\.default\.nameAndDecorators}/)),E=t.findByProps("UserPopoutInfo"),B=t.findByProps("getDMUserIds"),P=t.findByProps("getUser","getCurrentUser"),c=[];var _=n=>({onLoad(){c.push(l.after("renderDecorators",N.prototype,(e,o)=>{const{props:s}=o._owner.stateNode;o.props.children.splice(0,0,a.React.createElement(m,{user:s.user}))})),c.push(l.before("render",A.default,([e])=>{if(e.to&&typeof e.to=="string"){const o=e.to.match(/@me\/(.+?)$/)[1];if(o){const s=B.getChannel(o);if(s?.type==1){const r=s.recipients[0],i=P.getUser(r);i&&(Array.isArray(e.decorators)||(e.decorators=[e.decorators]),e.decorators.push(a.React.createElement(m,{user:i})))}}}})),c.push(l.after("UserPopoutInfo",E,(e,o)=>{const s=p.findInReactTree(o,r=>r.className&&r.className.startsWith("headerText-"));if(s){const r=s.children[1];s.children[1]=a.React.createElement("div",{style:{display:"flex",flexDirection:"row"}},r,a.React.createElement(m,{user:r.props.user}))}}))},onUnload(){for(const e of c)e();c.splice(0,c.length)}});return _})(cumcord.modules.webpackModules,cumcord.utils,cumcord.patcher,cumcord.modules.common);
