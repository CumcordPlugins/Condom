(function(i,p,f,t){"use strict";const I=i.findByProps("typing","ellipsis"),T=i.findByProps("AnimatedDots","default").default,S=i.findByDisplayName("ChannelItem",!1),n={},l=new Set;function s(e){e.type=="TYPING_START"?(n[e.channelId]||(n[e.channelId]=new Set),n[e.channelId].add(e.userId)):n[e.channelId]&&n[e.channelId].delete(e.message?e.message.author.id:e.userId);for(const{update:a,channelId:d}of l)d==e.channelId&&a()}function b({channel:e,muted:a}){const[d,c]=t.React.useState(!!n[e.id]?.size);return t.React.useEffect(()=>{function u(){c(n[e.id]?.size)}const h={update:u,channelId:e.id};return l.add(h),u(),()=>{l.delete(h)}},[e.id]),!d||a?null:t.React.createElement("div",{style:{marginLeft:"6px",paddingBottom:"3px"}},t.React.createElement(T,{className:I.ellipsis,dotRadius:3.5,themed:!0}))}let r;var E=e=>({onLoad(){t.FluxDispatcher.subscribe("TYPING_START",s),t.FluxDispatcher.subscribe("TYPING_STOP",s),t.FluxDispatcher.subscribe("MESSAGE_CREATE",s),r=f.after("default",S,function([a],d){const c=p.findInReactTree(d,u=>u?.className?.startsWith("children-"));c&&c.children.push(t.React.createElement(b,{channel:a.channel,muted:a.muted}))})},onUnload(){t.FluxDispatcher.unsubscribe("TYPING_START",s),t.FluxDispatcher.unsubscribe("TYPING_STOP",s),t.FluxDispatcher.unsubscribe("MESSAGE_CREATE",s),r()}});return E})(cumcord.modules.webpackModules,cumcord.utils,cumcord.patcher,cumcord.modules.common);
