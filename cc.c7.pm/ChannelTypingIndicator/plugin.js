(function(c,p,h,t){"use strict";const T=c.findByProps("typing","ellipsis"),I=c.find(e=>e.default&&e.default.type&&typeof e.default.type=="function"&&e.default.type.toString().match(/dotRadius:.,dotPosition:./)).default,o=c.findByDisplayName("ChannelItem",!1),s={},l=new Set;function i(e){e.type=="TYPING_START"?(s[e.channelId]||(s[e.channelId]=new Set),s[e.channelId].add(e.userId)):s[e.channelId]&&s[e.channelId].delete(e.message?e.message.author.id:e.userId);for(const{update:n,channelId:a}of l)a==e.channelId&&n()}function y({channel:e,muted:n}){const[a,u]=t.React.useState(!!s[e.id]?.size);return t.React.useEffect(()=>{function d(){u(s[e.id]?.size)}const f={update:d,channelId:e.id};return l.add(f),d(),()=>{l.delete(f)}},[e.id]),!a||n?null:t.React.createElement("div",{style:{marginLeft:"6px",paddingBottom:"3px"}},t.React.createElement(I,{className:T.ellipsis,dotRadius:3.5,themed:!0}))}let r;var S=e=>({onLoad(){t.FluxDispatcher.subscribe("TYPING_START",i),t.FluxDispatcher.subscribe("TYPING_STOP",i),t.FluxDispatcher.subscribe("MESSAGE_CREATE",i),r=h.after("default",o,function([n],a){const u=p.findInReactTree(a,d=>d?.className?.startsWith("children-"));u&&u.children.push(t.React.createElement(y,{channel:n.channel,muted:n.muted}))})},onUnload(){t.FluxDispatcher.unsubscribe("TYPING_START",i),t.FluxDispatcher.unsubscribe("TYPING_STOP",i),t.FluxDispatcher.unsubscribe("MESSAGE_CREATE",i),r()}});return S})(cumcord.modules.webpackModules,cumcord.utils,cumcord.patcher,cumcord.modules.common);
